<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html>

  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Generation and use of geo-information data | MARS LIFE Runtime System </title>
    <meta name="viewport" content="width=device-width">
    <meta name="title" content="Generation and use of geo-information data | MARS LIFE Runtime System ">
    <meta name="generator" content="docfx ">
  
    <link rel="shortcut icon" href="../../../images/mars/mars-icon.ico">
    <link rel="stylesheet" href="../../../styles/docfx.vendor.css">
    <link rel="stylesheet" href="../../../styles/docfx.css">
    <link rel="stylesheet" href="../../../styles/main.css">
    <link href="https://fonts.googleapis.com/css?family=Roboto" rel="stylesheet"> 
    <meta property="docfx:navrel" content="../../../toc.html">
    <meta property="docfx:tocrel" content="../../toc.html">
  
  <meta property="docfx:rel" content="../../../">
  
  </head>  <body data-spy="scroll" data-target="#affix" data-offset="120">
    <div id="wrapper">
      <header>

        <nav id="autocollapse" class="navbar navbar-inverse ng-scope" role="navigation">
          <div class="container">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>

              <a class="navbar-brand" href="../../../index.html">
                <img id="logo" class="svg" src="../../../images/mars/mars-icon-resized.png" alt="">
              </a>
            </div>
            <div class="collapse navbar-collapse" id="navbar">
              <form class="navbar-form navbar-right" role="search" id="search">
                <div class="form-group">
                  <input type="text" class="form-control" id="search-query" placeholder="Search" autocomplete="off">
                </div>
              </form>

                <ul class="nav level1 navbar-nav">
                      <li>
                          <a href="../../../articles/about_mars.html" title="Documentation">Documentation</a>
                      </li>
                      <li>
                          <a href="../../../simulation/Mars.Core.html" title="Core API">Core API</a>
                      </li>
                      <li>
                          <a href="../../../soh/SOHBicycleModel.Common.html" title="SmartOpenHamburg API">SmartOpenHamburg API</a>
                      </li>
                      <li>
                          <a href="../../../components/Mars.Components.html" title="Model Components API">Model Components API</a>
                      </li>
                      <li>
                          <a href="../../../common/Mars.Common.html" title="Common API">Common API</a>
                      </li>
                </ul>            </div>
          </div>
        </nav>

        <div class="subnav navbar navbar-default">
          <div class="container hide-when-search" id="breadcrumb">
            <ul class="breadcrumb">
              <li></li>
            </ul>
          </div>
        </div>
      </header>
      <div class="container body-content">

        <div id="search-results">
          <div class="search-list">Search Results for <span></span></div>
          <div class="sr-items">
            <p><i class="glyphicon glyphicon-refresh index-loading"></i></p>
          </div>
          <ul id="pagination" data-first="First" data-prev="Previous" data-next="Next" data-last="Last"></ul>
        </div>
      </div>
      <div role="main" class="container body-content hide-when-search">
        <div class="sidenav hide-when-search">
          <a class="btn toc-toggle collapse" data-toggle="collapse" href="#sidetoggle" aria-expanded="false" aria-controls="sidetoggle">Show / Hide Table of Contents</a>
          <div class="sidetoggle collapse" id="sidetoggle">
            <div>
              <div class="sidefilter">
                <form class="toc-filter">
                  <span class="glyphicon glyphicon-filter filter-icon"></span>
                  <input type="text" id="toc_filter_input" placeholder="Enter here to filter..." onkeypress="if(event.keyCode==13) {return false;}">
                </form>
              </div>
              <div class="sidetoc">
                <div class="toc" id="toc">

                  <ul class="nav level1">
                    <li class="">
                      <a href="../../dsl/index.html" title="MARS DSL Language" class="">MARS DSL Language</a>
                    </li>
                    <li class="">
                      <span class="expand-stub"></span>
                      <a href="../../core/index.html" title="MARS Runtime System" class="">MARS Runtime System</a>

                        <ul class="nav level2">
                          <li class="">
                            <a href="../../core/getting-started/index.html" title="Getting started with MARS" class="">Getting started with MARS</a>
                          </li>
                          <li class="">
                            <span class="expand-stub"></span>
                            <a href="../../core/basic-concepts/index.html" title="Basic Concepts" class="">Basic Concepts</a>

                              <ul class="nav level3">
                                <li class="">
                                  <a href="../../core/basic-concepts/multi-agent-simulation.html" title="Multi-Agent-Simulation" class="">Multi-Agent-Simulation</a>
                                </li>
                                <li class="">
                                  <a href="../../core/basic-concepts/agent.html" title="Agents" class="">Agents</a>
                                </li>
                                <li class="">
                                  <a href="../../core/basic-concepts/layers.html" title="Layers" class="">Layers</a>
                                </li>
                                <li class="">
                                  <a href="../../core/basic-concepts/entity.html" title="Entities" class="">Entities</a>
                                </li>
                                <li class="">
                                  <span class="expand-stub"></span>
                                  <a href="../../core/basic-concepts/environments/index.html" title="Environments" class="">Environments</a>

                                    <ul class="nav level4">
                                      <li class="">
                                        <a href="../../core/basic-concepts/environments/spatialhashenv.html" title="SpatialHashEnvironment" class="">SpatialHashEnvironment</a>
                                      </li>
                                      <li class="">
                                        <a href="../../core/basic-concepts/environments/geohashenv.html" title="GeoHashEnvironment" class="">GeoHashEnvironment</a>
                                      </li>
                                      <li class="">
                                        <a href="../../core/basic-concepts/environments/spatialgraphenv.html" title="SpatialGraphEnvironment" class="">SpatialGraphEnvironment</a>
                                      </li>
                                      <li class="">
                                        <a href="../../core/basic-concepts/environments/collisionenv.html" title="CollisionEnvironment" class="">CollisionEnvironment</a>
                                      </li>
                                    </ul>                                </li>
                                <li class="">
                                  <a href="../../core/basic-concepts/model.html" title="Model Setup" class="">Model Setup</a>
                                </li>
                              </ul>                          </li>
                          <li class="">
                            <span class="expand-stub"></span>
                            <a href="../../core/model-configuration/index.html" title="Model Configuration" class="">Model Configuration</a>

                              <ul class="nav level3">
                                <li class="">
                                  <a href="../../core/model-configuration/agent_config.html" title="Agent and Entity Configuration" class="">Agent and Entity Configuration</a>
                                </li>
                                <li class="">
                                  <a href="../../core/model-configuration/layer_config.html" title="Layer Configuration" class="">Layer Configuration</a>
                                </li>
                                <li class="">
                                  <a href="../../core/model-configuration/output_filter.html" title="Output Filter" class="">Output Filter</a>
                                </li>
                                <li class="">
                                  <a href="../../core/model-configuration/sim_config_options.html" title="Simulation Configuration Options" class="">Simulation Configuration Options</a>
                                </li>
                                <li class="">
                                  <a href="../../core/model-configuration/sim_output_formats.html" title="Simulation Output Formats" class="">Simulation Output Formats</a>
                                </li>
                              </ul>                          </li>
                          <li class="">
                            <span class="expand-stub"></span>
                            <a href="../../core/data-sources/index.html" title="Data Sources" class="">Data Sources</a>

                              <ul class="nav level3">
                                <li class="">
                                  <a href="../../core/data-sources/geospatial_data_sources.html" title="Geospatial Data Sources" class="">Geospatial Data Sources</a>
                                </li>
                                <li class="">
                                  <a href="../../core/data-sources/geospatial_data_types.html" title="Geospatial Data Types" class="">Geospatial Data Types</a>
                                </li>
                                <li class="">
                                  <a href="../../core/data-sources/ascii-grid.html" title="ASCII grid (.asc)" class="">ASCII grid (.asc)</a>
                                </li>
                                <li class="">
                                  <a href="../../core/data-sources/csv.html" title="CSV" class="">CSV</a>
                                </li>
                                <li class="">
                                  <a href="../../core/data-sources/time-series.html" title="Time-series Data" class="">Time-series Data</a>
                                </li>
                              </ul>                          </li>
                          <li class="">
                            <span class="expand-stub"></span>
                            <a href="../../core/analysis-and-visualization/index.html" title="Analysis and Visualization" class="">Analysis and Visualization</a>

                              <ul class="nav level3">
                                <li class="">
                                  <a href="../../core/analysis-and-visualization/visualizing_agent_trips_kepler.html" title="Visualizing Agent Movement Trajectories" class="">Visualizing Agent Movement Trajectories</a>
                                </li>
                                <li class="">
                                  <a href="../../core/analysis-and-visualization/live_visualization.html" title="Simple Live Visualization" class="">Simple Live Visualization</a>
                                </li>
                                <li class="">
                                  <a href="../../core/analysis-and-visualization/visualizing_sim_results.html" title="Analyzing Output Data" class="">Analyzing Output Data</a>
                                </li>
                              </ul>                          </li>
                          <li class="">
                            <span class="expand-stub"></span>
                            <a href="../../core/tutorials/index.html" title="Tutorials" class="">Tutorials</a>

                              <ul class="nav level3">
                                <li class="">
                                  <a href="../../core/tutorials/create_new_mars_csharp_project.html" title="Creating a new MARS C# project" class="">Creating a new MARS C# project</a>
                                </li>
                                <li class="">
                                  <a href="../../core/tutorials/main_and_configs.html" title="Creating a starting point for your model" class="">Creating a starting point for your model</a>
                                </li>
                                <li class="">
                                  <a href="../../core/tutorials/create_vector_layer_raster_layer.html" title="Creating vector and raster layer files" class="">Creating vector and raster layer files</a>
                                </li>
                                <li class="">
                                  <a href="../../core/tutorials/wolf_sheep_tutorial.html" title="Building your first model (wolf-sheep-grass)" class="">Building your first model (wolf-sheep-grass)</a>
                                </li>
                                <li class="">
                                  <a href="../../core/help/index.html" title="Common problems and solutions" class="">Common problems and solutions</a>
                                </li>
                                <li class="active">
                                  <a href="../../core/tutorials/geo-data-acquisition.html" title="Acquire geo data for layers" class="active">Acquire geo data for layers</a>
                                </li>
                                <li class="">
                                  <a href="../../core/tutorials/deploy_in_cloud.html" title="Build and start your model in Kubernetes cluster" class="">Build and start your model in Kubernetes cluster</a>
                                </li>
                              </ul>                          </li>
                        </ul>                    </li>
                    <li class="">
                      <span class="expand-stub"></span>
                      <a href="../../soh/index.html" title="SmartOpenHamburg" class="">SmartOpenHamburg</a>

                        <ul class="nav level2">
                          <li class="">
                            <a href="../../soh/getting-started.html" title="Quick Start" class="">Quick Start</a>
                          </li>
                          <li class="">
                            <span class="expand-stub"></span>
                            <a href="../../soh/scenarios/index.html" title="Ready to use scenarios (boxes)" class="">Ready to use scenarios (boxes)</a>

                              <ul class="nav level3">
                                <li class="">
                                  <a href="../../soh/scenarios/ferry_transfer.html" title="Ferry Transfer" class="">Ferry Transfer</a>
                                </li>
                                <li class="">
                                  <a href="../../soh/scenarios/green_4_bikes.html" title="Green4Bikes" class="">Green4Bikes</a>
                                </li>
                                <li class="">
                                  <a href="../../soh/scenarios/ferry_transfer_green4bikes_results.html" title="Results" class="">Results</a>
                                </li>
                                <li class="">
                                  <a href="../../soh/scenarios/ferry_transfer_green4bikes_result_scheme.html" title="Result Schemas" class="">Result Schemas</a>
                                </li>
                              </ul>                          </li>
                          <li class="">
                            <span class="expand-stub"></span>
                            <a href="../../soh/index.html" title="Layer" class="">Layer</a>

                              <ul class="nav level3">
                                <li class="">
                                  <a href="../../soh/layers/multi_modal_layer.html" title="Multimodal Layer" class="">Multimodal Layer</a>
                                </li>
                                <li class="">
                                  <a href="../../soh/layers/modal_layer.html" title="Modal Layer" class="">Modal Layer</a>
                                </li>
                                <li class="">
                                  <a href="../../soh/layers/scheduling_layer.html" title="Scheduling Layer" class="">Scheduling Layer</a>
                                </li>
                                <li class="">
                                  <a href="../../soh/layers/vector_layer.html" title="Vector Layer" class="">Vector Layer</a>
                                </li>
                              </ul>                          </li>
                          <li class="">
                            <span class="expand-stub"></span>
                            <a href="../../soh/index.html" title="Agents" class="">Agents</a>

                              <ul class="nav level3">
                                <li class="">
                                  <a href="../../soh/agents.html" title="Behaviour Model" class="">Behaviour Model</a>
                                </li>
                                <li class="">
                                  <a href="../../soh/agents/multi_modal_agent.html" title="Multimodal" class="">Multimodal</a>
                                </li>
                                <li class="">
                                  <a href="../../soh/agents/multi_capable_agent.html" title="Multi-Capable" class="">Multi-Capable</a>
                                </li>
                                <li class="">
                                  <a href="../../soh/steering.html" title="Multi-Modality" class="">Multi-Modality</a>
                                </li>
                                <li class="">
                                  <a href="../../soh/agents/citizen.html" title="Citizen" class="">Citizen</a>
                                </li>
                                <li class="">
                                  <a href="../../soh/agents/traveler.html" title="Traveler" class="">Traveler</a>
                                </li>
                              </ul>                          </li>
                          <li class="">
                            <span class="expand-stub"></span>
                            <a href="../../soh/index.html" title="Entities" class="">Entities</a>

                              <ul class="nav level3">
                                <li class="">
                                  <a href="../../soh/entities.html" title="Referencing" class="">Referencing</a>
                                </li>
                                <li class="">
                                  <a href="../../soh/entities/car.html" title="Street Vehicles" class="">Street Vehicles</a>
                                </li>
                                <li class="">
                                  <a href="../../soh/entities/bicycle.html" title="Bicycle Vehicles" class="">Bicycle Vehicles</a>
                                </li>
                                <li class="">
                                  <a href="../../soh/entities/ferry.html" title="Ferry" class="">Ferry</a>
                                </li>
                              </ul>                          </li>
                        </ul>                    </li>
                  </ul>                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="article row grid-right">
          <div class="col-md-10">
            <article class="content wrap" id="_content" data-uid="">
<h1 id="generation-and-use-of-geo-information-data">Generation and use of geo-information data</h1>

<h2 id="1-find-geographic-data-in-a-reasonable-dimension">1. Find geographic data in a reasonable dimension</h2>
<p>For a simulation it is necessary to decide on a geographic space. This should not be too large and not too small. Therefore define a bounding box that limits the expansion. </p>
<p>For the usage with the tool QGIS see <a href="create_vector_layer_raster_layer.html">How to prepare a vector/raster layer file</a></p>
<h2 id="2-using-osmnx-to-generate-layer-data">2. Using OSMnx to generate layer data</h2>
<p><a href="https://www.openstreetmap.org/">OpenStreetMap (OSM)</a>  provides a <a href="https://www.python.org/">Python</a> library and associated API to store specific geographic areas in a suitable format. This library is called OSMnx. Generally it provides various geographic data, in fact it is mostly used for graph data. </p>
<ol>
<li>Installing the <a href="https://osmnx.readthedocs.io/en/stable">OSMnx package</a></li>
<li><a href="https://github.com/gboeing/osmnx-examples">Examples of usage</a></li>
</ol>
<p><strong>Hint:</strong> On Windows additional packages are required for proper working: the GDAL package for your respective python version.  Using an example with the Galapagos Island and the use of OSMnx.</p>
<pre><code class="lang-python">import osmnx as ox

def save_place(place_name):
    # Retrieve the vector boundary of the area we need
    place = ox.geocode_to_gdf(place_name)
    place.to_file(&quot;galapagos.geojson&quot;, driver=&#39;GeoJSON&#39;)

if __name__ == &#39;__main__&#39;:
    place_name = &#39;Galapagos Islands&#39;
    # Its also possible to become more than one boundary in the same vectorfile
        # place_name = [&#39;Isla Isabela, Ecuador&#39;, &#39;Isla Santiago, Ecuador&#39;]
    save_place(place_name)
</code></pre><h2 id="3-using-a-bounding-box-to-reduce-dimension-of-given-data-from-a-base-model">3. Using a bounding box to reduce dimension of given data from a base model</h2>
<p>If data is available in a suitable format, it is possible to crop it using <a href="https://qgis.org/de/site/">QGIS</a>. This way it is easy to save the desired area with a few provided tools.</p>
<p>The model environment is already available (e.g., in the form of a base model) and a subsection (corresponding to the bounding box) is to be extracted</p>
<ol>
<li>Import a given layer file (<em>base layer</em>) in QGIS (drag-and-drop). This is our <em>Input layer</em>.</li>
<li><a href="create_vector_layer_raster_layer.html">Create a mask (bounding box) in a temporal layer</a>  that limits the geographic extent. This is our <em>Overlay layer</em>.<ol>
<li>Layer &#8594; Create Layer &#8594; New Temporary Scratch Layer </li>
<li>Drop-down menu &quot;Geometry type&quot;: MultiPolygon (most often sufficient)</li>
<li>Ok</li>
<li>Edit &#8594; Add &quot;any polygon form that fits your requirements&quot;</li>
<li>Layer &#8594; Toggle Editing &#8594; Save</li>
</ol>
</li>
<li>Vector (possibily Vektor) &#8594;  geo processing tools &#8594;  Intersection...</li>
<li>Drop-down menu &quot;Input layer&quot;: base layer</li>
<li>Drop-down menu &quot;Overlay layer&quot;: bounding box (or the other way around)</li>
<li>Click &quot;Start&quot;</li>
<li>A new layer (<em>intersect layer</em>) containing the intersected geodata appears in the Layer window (bottom left)</li>
<li>Export the intersect layer:<ol>
<li>Right-click the intersect layer</li>
<li>Select &quot;Export&quot; and &quot;Save as&quot;</li>
<li>Specify the file name and file format</li>
<li>Click &quot;OK&quot;</li>
</ol>
</li>
</ol>
<p>Base data with red bounding box (above) and the new data in dimension of mask as result (below).
<img src="../../../images/docu/intersect_bounding_box_with_base_data_before.png" alt="intersect_bounding_box_with_base_data_before">
<img src="../../../images/docu/intersect_bounding_box_with_base_data_result.png" alt="intersect_bounding_box_with_base_data_result"></p>
<h2 id="4-using-the-bounding-box-with-data-from-the-eo-browser-esa">4. Using the bounding box with data from the EO Browser (ESA)</h2>
<p>If the necessary data are not available, it is possible to obtain them via a browser (satellite data freely available from ESA). How to crop the data is explained in this section.</p>
<p><strong>Note</strong>: To download the files in a geo format, an account is required. Accounts are for free.</p>
<ol>
<li>Model environment is <strong>not</strong> available; data acquisition via external data sources</li>
<li><strong>EO Browser:</strong> freely available satellite images (globally) from the ESA (European Space Agency)</li>
<li>Visit <a href="https://apps.sentinel-hub.com/eo-browser/">https://apps.sentinel-hub.com/eo-browser</a> (a tutorial with first steps is available, if needed)</li>
<li>Upload your bounding box:<ol>
<li>Click the pentagon icon (top right) and drag-and-drop the file containing the bounding box into the EO Browser</li>
</ol>
</li>
<li>Specify the time range for the desired data and click &quot;Search&quot;</li>
<li>Select one of the available data set (The down-arrows provide additional information)</li>
<li>Select the desired geodata from within the data set</li>
<li>Select &quot;Download image&quot; (right)</li>
<li>Switch to the tab &quot;Analytical&quot;</li>
<li>Select the file format TIFF</li>
<li>Activate &quot;Clip extra bands&quot; (if not already activated)</li>
<li>Select &quot;Download&quot; </li>
</ol>
<p><img src="../../../images/docu/eo-browser.png" alt="EO-Browser"></p>
<h2 id="5-generating-a-raster-layer-from-a-geotiff-file">5. Generating a raster layer from a GeoTIFF file</h2>
<p>The Mars Runtime System uses vector and raster layers. In order to make raster layers usable, it is necessary to bring them into a suitable format. GeoTiff files cannot be used directly. This section explains how to transform to ASC files that are readable for the runtime system.</p>
<h3 id="1-transform-the-geotiff-file-to-an-asc-file">1. Transform the GeoTiff file to an ASC file</h3>
<ol>
<li>Import the desired <code>tiff</code> file into QGIS (drag-and-drop)</li>
<li>We require the layer in greyscale.
 1.Raster &#8594;  Raster Calculator<ol>
<li>Enter the formula (R + G + B) / 3 into the raster calculator expression (R = chanel 1, G = chanel 2, B = chanel 3)</li>
<li>From &quot;raster chanels&quot;, select the three chanels R, G, and B. These appear in the raster calculator expression. Enclose them with round parentheses and divide the expression by 3.
<img src="../../../images/docu/geo_tiff_grayscale.png" alt="QGIS_geo_tiff_grayscale"></li>
<li>In &quot;Result layer&quot; &#8594; &quot;Output layer&quot; specify the file name and file format (GeoTIFF)</li>
<li>Select OK</li>
</ol>
</li>
<li>Save the newly generated layer (let&#39;s call it <em>GrayscaleGEOTIFF</em>) as an asc file<ol>
<li>Raster &#8594;  Conversion &#8594; Translate (Convert Format)/ Convert (format conversion)...</li>
<li>Input layer: GrayscaleGEOTIFF</li>
<li>In the field &quot;Converted&quot;, click &quot;...&quot; and &quot;Save to File...&quot;</li>
<li>Specify the file name and file format (ASC)
<img src="../../../images/docu/geo_tiff_grayscale_to_asc.png" alt="QGIS_geo_tiff_grayscale"></li>
<li>Click &quot;Save&quot;</li>
<li>Click &quot;Run&quot;</li>
</ol>
</li>
<li>The geodata are exported from QGIS and saved as an asc file</li>
</ol>
<p><strong>Note:</strong> An <code>asc</code> file contains only one band. This example assumes a <code>tiff</code> file with three bands (red, green, and blue). Generally, it is important to specify which band should be exported. For a <code>geotiff</code> file with only one band, no additional steps are necessary.</p>
<h3 id="2-manipulation-of-geotiff-file">2. Manipulation of GeoTIFF file</h3>
<p>GeoTiff are widespread. The bands may represent different data. Sometimes it is useful to mark specific areas as invalid. In the upcoming example, we want to remove values for water.</p>
<ol>
<li>Recognize that water has the same value in all 3 different bands.
<img src="../../../images/docu/geotiff_water_bands.png" alt="geotiff_water_bands"></li>
<li>Open Raster &#8594; Raster Calculator...</li>
<li>Insert an expression that specifies only valid band data. In our case, we only want to have data, where all bands have different data (water has here the same data in all three bands / compare screenshot).
For example: <code>&quot;geo@1&quot; != &quot;geo@2&quot; AND &quot;geo@1&quot; != &quot;geo@3&quot; AND &quot;geo@2&quot; != &quot;geo@3&quot;</code></li>
<li>Set Output layer path for layer creation. Ok.
<img src="../../../images/docu/geotiff_raster_calculator_land.png" alt="geotiff_raster_calculator_land"></li>
<li>Open Raster &#8594; Raster Calculator...</li>
<li>Make a new expression that combines your data with the created mask (in our example, the land geo tiff that is multiplied with the green band/geo@“). 
<code>&quot;geo@2&quot; * &quot;land@1&quot;</code>
Set the Output layer. Ok.
<img src="../../../images/docu/geotiff_green_land_masked.png" alt="geotiff_greenland_masked"></li>
</ol>
<p>Now the water areas all have the Band value <code>0</code>. If you even need it to be invalid, another transformation is necessary.</p>
<ol>
<li>Open Raster &#8594; Raster Calculator...</li>
<li>Make a new expression that devides the value and multiplies it afterwards. All values that are <code>0</code> are now transformed to <code>no data</code>.
<code>&quot;green_land@1&quot;/&quot;green_land@1&quot; *&quot;green_land@1&quot;</code>
Set the Output layer. Ok.
<img src="../../../images/docu/geotiff_green_land_masked_no_data.png" alt="geotiff_greenland_masked"></li>
</ol>
<h2 id="6-public-data-sources">6. Public data sources</h2>
<p>There are many freely available data sources.  When researching on the internet, one comes across many portals and sites that offer geoinformation data, some of them are listed in the following.</p>
<p>Geographically limited</p>
<ul>
<li><a href="https://geoportal.de">Geoportal</a> geodata provided by federal, state and local authorities.</li>
<li><a href="https://geoportal-hamburg.de">Geoportal Hamburg</a> geodata provided by federal, state and local authorities. Limited to Hamburg.</li>
<li><a href="https://www.africageoportal.com/">The Afica GeoPortal</a> provides a variety of data from covid to desert locust.</li>
</ul>
<p>Global</p>
<ul>
<li><a href="https://openstreetmap.org">OpenSteetMap</a> holds a map of the world with street networks and additional data.</li>
<li><a href="https://scihub.copernicus.eu/dhus/#/home">ESA Copernicus Open Access Hub</a> the Open Access Hub provides complete, free and open access to Sentinel-1, Sentinel-2, Sentinel-3 and Sentinel-5P user products.</li>
<li><a href="https://apps.sentinel-hub.com/eo-browser/">EO Browser</a> provides satellite data.</li>
<li><a href="http://www.naturalearthdata.com/downloads/">Natural Earth</a> provides cultural, physical and raster categories.</li>
<li><a href="https://terra.ipums.org/">IPUMS TERRA</a> integrates population and environmental data across disciplinary scientific domains.</li>
<li><a href="https://neo.sci.gsfc.nasa.gov/">NASA Earth Observation</a> provides satellite data (ocean, atmosphere, and land surfaces).</li>
<li><a href="https://sedac.ciesin.columbia.edu/">Socioeconomic data and applications center SEDAC</a> provides socioeconomic data sets.</li>
<li><a href="https://opentopography.org/">Open Topography</a> provides high-resolution topography data and tools.</li>
<li><a href="http://www.fao.org/geonetwork/srv/en/main.home">FAO GeoNetwork</a> provides interactive maps, satellite imagery and related spatial databases.</li>
<li><a href="https://meteostat.net/de">meteostat</a> offers world wide weather and climate data.</li>
<li><a href="https://www.worldclim.org/">WorldClim</a> offers maps, graphs, tables, and data of the global climate.</li>
<li><a href="http://geodata.grid.unep.ch/">United Nations Environmental Data Explorer</a> covers themes like Freshwater, Population, Forests, Emissions, Climate, Disasters, Health and GDP.</li>
<li><a href="https://hub.arcgis.com/search">ArcGIS Hub</a> provides a broad collection of diverse data.</li>
<li><a href="https://www.esri.de/de-de/home">ESRI</a> provides a broad collection of diverse data.</li>
</ul>
<p>However, the data offered is available in very similar formats. The format <code>geotiff</code>, <code>geojson</code>, or <code>shapefile</code> can be interpreted by QGIS and must potentially be edited.</p>
<h2 id="7-openstreetmap-as-data-source">7. OpenStreetMap as data source</h2>
<p><a href="https://www.openstreetmap.org/">OpenStreetMap (OSM)</a> is a free and rich data source for a wide variety of data. There are road networks, buildings, rivers and much more. Much of this data can be accessed via the website. It may be worthwhile to have a look here to see if there is something suitable (for your own question).</p>
<ol>
<li>Download a desired area via a QGIS plugin:<ol>
<li>Follow these steps for installation and usage: <a href="http://www.qgistutorials.com/de/docs/downloading_osm_data.html">http://www.qgistutorials.com/de/docs/downloading_osm_data.html</a></li>
</ol>
</li>
<li>Download the desired area via an internet browser:<ol>
<li>Visit <a href="https://www.openstreetmap.org/">OpenStreetMap</a></li>
<li>Click &quot;Export&quot; (located in the top bar)</li>
<li>Specify the desired area (this can also be done by selecting &quot;Select another area manually&quot;)</li>
<li>Click &quot;Export&quot;</li>
<li>An <code>osm</code> file is downloaded which can be imported into and visualized in QGIS (drag-and-drop)</li>
</ol>
</li>
</ol>
<p><strong>Note:</strong> If the area is too large, the import into QGIS might fail</p>
<h2 id="8-time-series-layer">8. Time series layer</h2>
<p>Time series layers are used to represent data that should change during the course of a simulation. In order to realise this, the desired data are provided with a time stamp to tell the system at which point in time which file has to be taken.</p>
<p>Time series layers are used by the MARS Runtime System to include time-dependent data in simulation runs. These data must be in the form of a raster layer (<code>asc</code> file). Additionally, a metadata.csv file must be present. This <code>csv</code> file specifies the point in time at which a particular file should be used as a layer in the simulation. The <code>csv</code> file is structured as follows:</p>
<table>
<thead>
<tr>
<th>Date</th>
<th>File</th>
</tr>
</thead>
<tbody>
<tr>
<td>2010-01-01T00:00:00</td>
<td>wc2.1_2.5m_tmin_2010-01.asc</td>
</tr>
<tr>
<td>2010-02-01T00:00:00</td>
<td>wc2.1_2.5m_tmin_2010-02.asc</td>
</tr>
<tr>
<td>2010-03-01T00:00:00</td>
<td>wc2.1_2.5m_tmin_2010-03.asc</td>
</tr>
</tbody>
</table>
<p>The ASC file may look like the example below.</p>
<ul>
<li><code>ncols</code> describes the number of columns for that data is stored</li>
<li><code>nrows</code> describes the amount of rows respectively</li>
<li><code>xllcorner</code> is the left lower longitudinal corner of the whole raster</li>
<li><code>yllcorner</code> is the left lower latitudinal corner of the whole raster</li>
<li><code>cellsize</code> defines dimension of a grid cell in minutes</li>
<li><code>nodata_value</code> is the default value that symbolizes that for that cell no data is available</li>
</ul>
<pre><code class="lang-asc">ncols 4  
nrows 8  
xllcorner 30.5  
yllcorner -26  
cellsize 0.5  
nodata_value -9999  
17.807290649414 20.5651184082032 24.8631225585938 26.8945098876953
18.5511718750001 23.3313079833985 26.29580078125 27.8574005126953
20.4051147460938 25.4935241699219 27.5471893310547 28.5036560058594
27.4903656005859 28.1041198730469 28.9388061523438 29.2906738281251
28.8996826171876 29.4988952636719 30.3407836914063 31.0566650390625
30.1418853759766 30.5633178710938 31.2210021972657 31.8191162109376
30.4041229248047 31.273828125 31.6893402099609 31.8025604248047
31.709634399414 31.8638244628907 31.8258911132813 32.0521179199219
</code></pre><p>The <code>asc</code> files and the metadata.csv must be stored in the same directory (may also be zipped).</p>
<h2 id="9-data-usage-in-mars">9. Data usage in MARS</h2>
<p>Data is made usable in the MARS system via layers. These layers contain a wide variety of data with which an agent can interact.</p>
<ol>
<li>How to use a layer file during a MARS model simulation can be found <a href="../model-configuration/layer_config.html">here</a>.</li>
</ol>
<p><strong>Note:</strong> Data from external sources should always be validated regarding completeness, integrity, and plausibility.</p>
<h1 id="10-data-acquisition-using-the-example-of-hvv">10 Data acquisition using the example of HVV</h1>
<p>The utilisation of data obtained from external sources is an important step in the use of geoinformation data. This article uses the example of the HVV to show how to make S-Bahn lines available for a specific area of Hamburg.</p>
<ol>
<li>Find the source<ol>
<li>Open the side: <a href="https://geoportal-hamburg.de/geo-online/">https://geoportal-hamburg.de/geo-online/</a></li>
<li>Click on &quot;Themen&quot; in the upper left-hand corner</li>
<li>Click on &quot;Fachdaten&quot; in the dropdown-menue</li>
<li>Click on &quot;Transport und Verkehr&quot;</li>
<li>Click on &quot;HVV Streckennetz für Bahn-, Bus- und Fährlinien Hamburg&quot;</li>
<li>Click on the icon &quot;i&quot;</li>
<li>A window opens. Click on the &quot;WMS-Adresse&quot; tab</li>
<li>Save the link to the clipboard</li>
</ol>
</li>
<li>Integrate source in QGIS<ol>
<li>Launch QGIS</li>
<li>On the left in the browser window. Left click on &quot;WFS / OGC API - Feature&quot;</li>
<li>select &quot;new connection...&quot;</li>
<li>In the new dialogue window, give the connection a name (we use &quot;HVV&quot;) and copy the link into the column for the URL</li>
<li>Click &quot;Ok&quot;</li>
<li>Now open the new &quot;HVV&quot; tab and drag &quot;Strecken (Normalfahrplan)&quot; into the Layer window<ol>
<li>Check that the coordinate system at the bottom right is set to WGS84 EPGS:4326</li>
</ol>
</li>
</ol>
</li>
<li>Now load your mask as an additional layer</li>
<li>Intersect the layer as in the article &quot;Using a bounding box given data from a base model&quot;<ol>
<li>Drop-down menu &quot;Input layer&quot;: Strecken (Normalfahrplan)</li>
<li>Drop-down menu &quot;Overlay layer&quot;: The Mask</li>
<li>Click &quot;Start&quot;</li>
</ol>
</li>
<li>To add the stations repeat the same steps as with &quot;Strecken (Normalfahrplan)&quot; only this time with &quot;Haltestellen&quot;</li>
<li>Now intersect the stops with the output layer from the last intersection</li>
<li>To save the data in <strong>one</strong> geojson, right-click on the first intersection (routes) and export it as a geojson</li>
<li>Now do the same with the second intersection (stations) and save it in the same file<ol>
<li>A dialogue opens. Click on &quot;Attach to Layer&quot; and &quot;Ok&quot;</li>
</ol>
</li>
</ol>
<p><img src="../../../images/docu/s-bahn-hh.png" alt="S-BAHN-HH"></p>
<h1 id="11-view-attributes-of-the-data">11 View attributes of the data</h1>
<p>When using free data, the included attributes of data are very different. It is possible to check with QGIS after loading the data what information is in the data. We will take an example from Hamburg <a href="https://opendata-esri-de.opendata.arcgis.com/datasets/esri-de-content::ortsteile-hamburg/geoservice?geometry=7.279%2C53.395%2C11.459%2C53.965">here</a>. The data we use is a Hamburg vector layer. It contains all districts and boroughs of the city.</p>
<ol>
<li>Load the file into QGIS</li>
<li>Right click on the layer. In the menu click on &quot;Open attribute table&quot;<ol>
<li>All the information contained in the layer is displayed here</li>
</ol>
</li>
</ol>
<p><img src="../../../images/docu/attribut-tabelle.png" alt="attribut-tabelle"></p>
<p>It is possible to apply certain operations to the attributes. In this way it is also possible to use only certain parts of a layer. In the following example we will cut out the district of Altona.</p>
<ol>
<li>Double click on the layer</li>
<li>in the &quot;Source&quot; window there is a tab &quot;Object filter on data provider&quot;. At the bottom right click on the button &quot;Query creation&quot;</li>
<li>In the dialogue under &quot;Fields&quot; we double-click on &quot;Bezirk_Nam&quot;<ol>
<li>You can also view the information contained in a field in the values window</li>
<li>This name is now displayed in the Provider Specific Filter Expression field</li>
</ol>
</li>
<li>The Provider Specific Filter Expression window must contain this expression: &quot;Bezirk_Nam&quot; = &#39;Altona&#39;<ol>
<li>It is possible to create a more complex query with logical operators</li>
</ol>
</li>
<li>Click on &quot;Ok&quot;</li>
<li>Now we have chosen the district of Altona</li>
</ol>
<p><img src="../../../images/docu/selection-altona.png" alt="selektion-altona"></p>
<p><strong>Hint:</strong> Depending on the version of QGIS, the query may also look different. Here is an example as an SQL query with the HVV and the S-Bahn routes.</p>
<p><img src="../../../images/docu/sql-request.png" alt="sql-request-formular"></p>
<h1 id="11-view-attributes-of-the-data--filter-by-data">11 View attributes of the data / filter by data</h1>
<p>When using free data, the included attributes of data are very different. It is possible to check with QGIS after loading the data what information is in the data. We will take an example from Hamburg <a href="https://opendata-esri-de.opendata.arcgis.com/datasets/esri-de-content::ortsteile-hamburg/geoservice?geometry=7.279%2C53.395%2C11.459%2C53.965">here</a>. The data we use is a Hamburg vector layer. It contains all districts and boroughs of the city.</p>
<ol>
<li>Load the file into QGIS</li>
<li>Right click on the layer. In the menu click on &quot;Open attribute table&quot;<ol>
<li>All the information contained in the layer is displayed here</li>
</ol>
</li>
</ol>
<p><img src="../../../images/docu/attribut-tabelle.png" alt="attribut-tabelle"></p>
<p>It is possible to apply certain operations to the attributes. In this way it is also possible to use only certain parts of a layer. In the following example we will cut out the district of Altona.</p>
<ol>
<li>Double click on the layer</li>
<li>in the &quot;Source&quot; window there is a tab &quot;Object filter on data provider&quot;. At the bottom right click on the button &quot;Query creation&quot;</li>
<li>In the dialogue under &quot;Fields&quot; we double-click on &quot;Bezirk_Nam&quot;<ol>
<li>You can also view the information contained in a field in the values window</li>
<li>This name is now displayed in the Provider Specific Filter Expression field</li>
</ol>
</li>
<li>The Provider Specific Filter Expression window must contain this expression: &quot;Bezirk_Nam&quot; = &#39;Altona&#39;<ol>
<li>It is possible to create a more complex query with logical operators</li>
</ol>
</li>
<li>Click on &quot;Ok&quot;</li>
<li>Now we have chosen the district of Altona</li>
</ol>
<p><img src="../../../images/docu/selection-altona.png" alt="selektion-altona"></p>
<p><strong>Hint:</strong> Depending on the version of QGIS, the query may also look different. Here is an example as an SQL query with the HVV and the S-Bahn routes.</p>
<p><img src="../../../images/docu/sql-request.png" alt="sql-request-formular"></p>
</article>
          </div>

          <div class="hidden-sm col-md-2" role="complementary">
            <div class="sideaffix">
              <div class="contribution">
                <ul class="nav">
                  <li>
                    <a href="https://github.com/MARS-Group-HAW/life/blob/main/Documentation/articles/core/tutorials/geo-data-acquisition.md/#L1" class="contribution-link">Improve this Doc</a>
                  </li>
                </ul>
              </div>
              <nav class="bs-docs-sidebar hidden-print hidden-xs hidden-sm affix" id="affix">
                <h5>In This Article</h5>
                <div></div>
              </nav>
            </div>
          </div>
        </div>
      </div>

      <footer>
        <div class="grad-bottom"></div>
        <div class="footer">
          <div class="container">
            <span class="pull-right">
              <a href="#top">Back to top</a>
            </span>
      <span>Copyright &copy MARS GROUP.<br><strong>HAW Hamburg</strong></span>
      
          </div>
        </div>
      </footer>
    </div>

    <script type="text/javascript" src="../../../styles/docfx.vendor.js"></script>
    <script type="text/javascript" src="../../../styles/docfx.js"></script>
    <script type="text/javascript" src="../../../styles/main.js"></script>
  </body>
</html>
