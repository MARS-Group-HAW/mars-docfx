<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html>

  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Analyzing Simulation Output | MARS LIFE Runtime System </title>
    <meta name="viewport" content="width=device-width">
    <meta name="title" content="Analyzing Simulation Output | MARS LIFE Runtime System ">
    <meta name="generator" content="docfx ">
  
    <link rel="shortcut icon" href="../../../images/mars/mars-icon.ico">
    <link rel="stylesheet" href="../../../styles/docfx.vendor.css">
    <link rel="stylesheet" href="../../../styles/docfx.css">
    <link rel="stylesheet" href="../../../styles/main.css">
    <link href="https://fonts.googleapis.com/css?family=Roboto" rel="stylesheet"> 
    <meta property="docfx:navrel" content="../../../toc.html">
    <meta property="docfx:tocrel" content="../../toc.html">
  
  <meta property="docfx:rel" content="../../../">
  
  </head>  <body data-spy="scroll" data-target="#affix" data-offset="120">
    <div id="wrapper">
      <header>

        <nav id="autocollapse" class="navbar navbar-inverse ng-scope" role="navigation">
          <div class="container">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>

              <a class="navbar-brand" href="../../../index.html">
                <img id="logo" class="svg" src="../../../images/mars/mars-icon-resized.png" alt="">
              </a>
            </div>
            <div class="collapse navbar-collapse" id="navbar">
              <form class="navbar-form navbar-right" role="search" id="search">
                <div class="form-group">
                  <input type="text" class="form-control" id="search-query" placeholder="Search" autocomplete="off">
                </div>
              </form>

                <ul class="nav level1 navbar-nav">
                      <li>
                          <a href="../../../articles/about_mars.html" title="Documentation">Documentation</a>
                      </li>
                      <li>
                          <a href="../../../simulation/Mars.Core.html" title="Core API">Core API</a>
                      </li>
                      <li>
                          <a href="../../../soh/SOHBicycleModel.Common.html" title="SmartOpenHamburg API">SmartOpenHamburg API</a>
                      </li>
                      <li>
                          <a href="../../../components/Mars.Components.html" title="Model Components API">Model Components API</a>
                      </li>
                      <li>
                          <a href="../../../common/Mars.Common.html" title="Common API">Common API</a>
                      </li>
                </ul>            </div>
          </div>
        </nav>

        <div class="subnav navbar navbar-default">
          <div class="container hide-when-search" id="breadcrumb">
            <ul class="breadcrumb">
              <li></li>
            </ul>
          </div>
        </div>
      </header>
      <div class="container body-content">

        <div id="search-results">
          <div class="search-list">Search Results for <span></span></div>
          <div class="sr-items">
            <p><i class="glyphicon glyphicon-refresh index-loading"></i></p>
          </div>
          <ul id="pagination" data-first="First" data-prev="Previous" data-next="Next" data-last="Last"></ul>
        </div>
      </div>
      <div role="main" class="container body-content hide-when-search">
        <div class="sidenav hide-when-search">
          <a class="btn toc-toggle collapse" data-toggle="collapse" href="#sidetoggle" aria-expanded="false" aria-controls="sidetoggle">Show / Hide Table of Contents</a>
          <div class="sidetoggle collapse" id="sidetoggle">
            <div>
              <div class="sidefilter">
                <form class="toc-filter">
                  <span class="glyphicon glyphicon-filter filter-icon"></span>
                  <input type="text" id="toc_filter_input" placeholder="Enter here to filter..." onkeypress="if(event.keyCode==13) {return false;}">
                </form>
              </div>
              <div class="sidetoc">
                <div class="toc" id="toc">

                  <ul class="nav level1">
                    <li class="">
                      <a href="../../dsl/index.html" title="MARS DSL Language" class="">MARS DSL Language</a>
                    </li>
                    <li class="">
                      <span class="expand-stub"></span>
                      <a href="../../core/index.html" title="MARS Runtime System" class="">MARS Runtime System</a>

                        <ul class="nav level2">
                          <li class="">
                            <a href="../../core/00_getting-started/index.html" title="Getting started with MARS" class="">Getting started with MARS</a>
                          </li>
                          <li class="">
                            <span class="expand-stub"></span>
                            <a href="../../core/10_basic-concepts/index.html" title="Basic Concepts" class="">Basic Concepts</a>

                              <ul class="nav level3">
                                <li class="">
                                  <a href="../../core/10_basic-concepts/00_multi-agent-simulation.html" title="Multi-Agent-Simulation" class="">Multi-Agent-Simulation</a>
                                </li>
                                <li class="">
                                  <a href="../../core/10_basic-concepts/10_agent.html" title="Agents" class="">Agents</a>
                                </li>
                                <li class="">
                                  <a href="../../core/10_basic-concepts/20_layers.html" title="Layers" class="">Layers</a>
                                </li>
                                <li class="">
                                  <a href="../../core/10_basic-concepts/30_entity.html" title="Entities" class="">Entities</a>
                                </li>
                                <li class="">
                                  <span class="expand-stub"></span>
                                  <a href="../../core/10_basic-concepts/environments/index.html" title="Environments" class="">Environments</a>

                                    <ul class="nav level4">
                                      <li class="">
                                        <a href="../../core/10_basic-concepts/environments/spatialhashenv.html" title="SpatialHashEnvironment" class="">SpatialHashEnvironment</a>
                                      </li>
                                      <li class="">
                                        <a href="../../core/10_basic-concepts/environments/geohashenv.html" title="GeoHashEnvironment" class="">GeoHashEnvironment</a>
                                      </li>
                                      <li class="">
                                        <a href="../../core/10_basic-concepts/environments/spatialgraphenv.html" title="SpatialGraphEnvironment" class="">SpatialGraphEnvironment</a>
                                      </li>
                                      <li class="">
                                        <a href="../../core/10_basic-concepts/environments/collisionenv.html" title="CollisionEnvironment" class="">CollisionEnvironment</a>
                                      </li>
                                    </ul>                                </li>
                                <li class="">
                                  <a href="../../core/10_basic-concepts/model.html" title="Model Setup" class="">Model Setup</a>
                                </li>
                              </ul>                          </li>
                          <li class="">
                            <span class="expand-stub"></span>
                            <a href="../../core/model-configuration/index.md" title="Model Configuration" class="">Model Configuration</a>

                              <ul class="nav level3">
                                <li class="">
                                  <a href="../../core/model-configuration/agent_config.md" title="Agent and Entity Configuration" class="">Agent and Entity Configuration</a>
                                </li>
                                <li class="">
                                  <a href="../../core/model-configuration/layer_config.md" title="Layer Configuration" class="">Layer Configuration</a>
                                </li>
                                <li class="">
                                  <a href="../../core/model-configuration/output_filter.md" title="Output Filter" class="">Output Filter</a>
                                </li>
                                <li class="">
                                  <a href="../../core/model-configuration/sim_config_options.md" title="Simulation Configuration Options" class="">Simulation Configuration Options</a>
                                </li>
                                <li class="">
                                  <a href="../../core/model-configuration/sim_output_formats.md" title="Simulation Output Formats" class="">Simulation Output Formats</a>
                                </li>
                              </ul>                          </li>
                          <li class="">
                            <span class="expand-stub"></span>
                            <a href="../../core/data-sources/index.md" title="Data Sources" class="">Data Sources</a>

                              <ul class="nav level3">
                                <li class="">
                                  <a href="../../core/data-sources/geospatial_data_sources.md" title="Geospatial Data Sources" class="">Geospatial Data Sources</a>
                                </li>
                                <li class="">
                                  <a href="../../core/data-sources/geospatial_data_types.md" title="Geospatial Data Types" class="">Geospatial Data Types</a>
                                </li>
                                <li class="">
                                  <a href="../../core/data-sources/ascii-grid.md" title="ASCII grid (.asc)" class="">ASCII grid (.asc)</a>
                                </li>
                                <li class="">
                                  <a href="../../core/data-sources/csv.md" title="CSV" class="">CSV</a>
                                </li>
                                <li class="">
                                  <a href="../../core/data-sources/time-series.md" title="Time-series Data" class="">Time-series Data</a>
                                </li>
                              </ul>                          </li>
                          <li class="">
                            <span class="expand-stub"></span>
                            <a href="../../core/analysis-and-visualization/index.md" title="Analysis and Visualization" class="">Analysis and Visualization</a>

                              <ul class="nav level3">
                                <li class="">
                                  <a href="../../core/analysis-and-visualization/visualizing_agent_trips_kepler.md" title="Visualizing Agent Movement Trajectories" class="">Visualizing Agent Movement Trajectories</a>
                                </li>
                                <li class="">
                                  <a href="../../core/analysis-and-visualization/live_visualization.md" title="Simple Live Visualization" class="">Simple Live Visualization</a>
                                </li>
                                <li class="">
                                  <a href="../../core/analysis-and-visualization/visualizing_sim_results.md" title="Analyzing Output Data" class="">Analyzing Output Data</a>
                                </li>
                              </ul>                          </li>
                          <li class="">
                            <span class="expand-stub"></span>
                            <a href="../../core/tutorials/index.html" title="Tutorials" class="">Tutorials</a>

                              <ul class="nav level3">
                                <li class="">
                                  <a href="../../core/tutorials/create_new_mars_csharp_project.html" title="Creating a new MARS C# project" class="">Creating a new MARS C# project</a>
                                </li>
                                <li class="">
                                  <a href="../../core/tutorials/main_and_configs.html" title="Creating a starting point for your model" class="">Creating a starting point for your model</a>
                                </li>
                                <li class="">
                                  <a href="../../core/tutorials/create_vector_layer_raster_layer.html" title="Creating vector and raster layer files" class="">Creating vector and raster layer files</a>
                                </li>
                                <li class="">
                                  <a href="../../core/tutorials/wolf_sheep_tutorial.html" title="Building your first model (wolf-sheep-grass)" class="">Building your first model (wolf-sheep-grass)</a>
                                </li>
                                <li class="">
                                  <a href="../../core/help/index.md" title="Common problems and solutions" class="">Common problems and solutions</a>
                                </li>
                                <li class="">
                                  <a href="../../core/tutorials/geo-data-acquisition.html" title="Acquire geo data for layers" class="">Acquire geo data for layers</a>
                                </li>
                                <li class="">
                                  <a href="../../core/tutorials/deploy_in_cloud.html" title="Build and start your model in Kubernetes cluster" class="">Build and start your model in Kubernetes cluster</a>
                                </li>
                              </ul>                          </li>
                        </ul>                    </li>
                    <li class="">
                      <span class="expand-stub"></span>
                      <a href="../../soh/index.html" title="SmartOpenHamburg" class="">SmartOpenHamburg</a>

                        <ul class="nav level2">
                          <li class="">
                            <a href="../../soh/getting-started.html" title="Quick Start" class="">Quick Start</a>
                          </li>
                          <li class="">
                            <span class="expand-stub"></span>
                            <a href="../../soh/scenarios/index.html" title="Ready to use scenarios (boxes)" class="">Ready to use scenarios (boxes)</a>

                              <ul class="nav level3">
                                <li class="">
                                  <a href="../../soh/scenarios/ferry_transfer.html" title="Ferry Transfer" class="">Ferry Transfer</a>
                                </li>
                                <li class="">
                                  <a href="../../soh/scenarios/green_4_bikes.html" title="Green4Bikes" class="">Green4Bikes</a>
                                </li>
                                <li class="">
                                  <a href="../../soh/scenarios/ferry_transfer_green4bikes_results.html" title="Results" class="">Results</a>
                                </li>
                                <li class="">
                                  <a href="../../soh/scenarios/ferry_transfer_green4bikes_result_scheme.html" title="Result Schemas" class="">Result Schemas</a>
                                </li>
                              </ul>                          </li>
                          <li class="">
                            <span class="expand-stub"></span>
                            <a href="../../soh/index.html" title="Layer" class="">Layer</a>

                              <ul class="nav level3">
                                <li class="">
                                  <a href="../../soh/layers/multi_modal_layer.html" title="Multimodal Layer" class="">Multimodal Layer</a>
                                </li>
                                <li class="">
                                  <a href="../../soh/layers/modal_layer.html" title="Modal Layer" class="">Modal Layer</a>
                                </li>
                                <li class="">
                                  <a href="../../soh/layers/scheduling_layer.html" title="Scheduling Layer" class="">Scheduling Layer</a>
                                </li>
                                <li class="">
                                  <a href="../../soh/layers/vector_layer.html" title="Vector Layer" class="">Vector Layer</a>
                                </li>
                              </ul>                          </li>
                          <li class="">
                            <span class="expand-stub"></span>
                            <a href="../../soh/index.html" title="Agents" class="">Agents</a>

                              <ul class="nav level3">
                                <li class="">
                                  <a href="../../soh/agents.html" title="Behaviour Model" class="">Behaviour Model</a>
                                </li>
                                <li class="">
                                  <a href="../../soh/agents/multi_modal_agent.html" title="Multimodal" class="">Multimodal</a>
                                </li>
                                <li class="">
                                  <a href="../../soh/agents/multi_capable_agent.html" title="Multi-Capable" class="">Multi-Capable</a>
                                </li>
                                <li class="">
                                  <a href="../../soh/steering.html" title="Multi-Modality" class="">Multi-Modality</a>
                                </li>
                                <li class="">
                                  <a href="../../soh/agents/citizen.html" title="Citizen" class="">Citizen</a>
                                </li>
                                <li class="">
                                  <a href="../../soh/agents/traveler.html" title="Traveler" class="">Traveler</a>
                                </li>
                              </ul>                          </li>
                          <li class="">
                            <span class="expand-stub"></span>
                            <a href="../../soh/index.html" title="Entities" class="">Entities</a>

                              <ul class="nav level3">
                                <li class="">
                                  <a href="../../soh/entities.html" title="Referencing" class="">Referencing</a>
                                </li>
                                <li class="">
                                  <a href="../../soh/entities/car.html" title="Street Vehicles" class="">Street Vehicles</a>
                                </li>
                                <li class="">
                                  <a href="../../soh/entities/bicycle.html" title="Bicycle Vehicles" class="">Bicycle Vehicles</a>
                                </li>
                                <li class="">
                                  <a href="../../soh/entities/ferry.html" title="Ferry" class="">Ferry</a>
                                </li>
                              </ul>                          </li>
                        </ul>                    </li>
                  </ul>                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="article row grid-right">
          <div class="col-md-10">
            <article class="content wrap" id="_content" data-uid="">
<h1 id="analyzing-simulation-output">Analyzing Simulation Output</h1>

<p>Simulation outputs can be analyzed and plotted with various tools. In this article, the analysis with <a href="https://plotly.com/chart-studio-help/database-connectors/personal-login/">FalconSQL</a> is used as an example.</p>
<hr>
<h2 id="how-to-plot-simulation-output-data-with-falconsql">How to plot simulation output data with FalconSQL</h2>
<p><strong>FalconSQL</strong> requires data stored in a database. Set the output to use one of the supported relational output kinds, described <a href="../model-configuration/sim_output_formats.md">here</a>.</p>
<ol>
<li><p>Go to <a href="https://plotly.com/chart-studio-help/database-connectors/personal-login/">Plotly</a> and download and install FalconSQL for your desired operating system.</p>
</li>
<li><p>Create a connection to your running database or database file (e.g., when using SQLite more about the output formats <a href="../model-configuration/sim_output_formats.md">here</a>). If FalconSQL is connected (in the Connection tab), you can submit SQL queries (in the query tab) to extract and visualize the desired data.</p>
</li>
<li><p>After the query ran successfully, the extracted attributes are available in the Chart tab. Click <code>Trace</code> to generate a new plot. You can generate multiple traces to visualize and compare different data.</p>
</li>
<li><p>In the Export tab, click <code>Upload chart</code>. You will be directed a Chart Studio Plotly site in your web browser, where you can create, edit, and share a dashboard that contains your diagrams.</p>
</li>
<li><p>Below is an example of visualization using simulation data that was stored in a PostgreSQL database. The simulation time was 24 hours and agents were able to travel on foot and by bike. The query submitted to FalconSQL was:</p>
<pre><code class="lang-sql">SELECT CAST(TRUNC(EXTRACT(HOUR FROM &quot;Citizen&quot;.&quot;DateTime&quot;)) AS INTEGER) AS &quot;hr:DateTime&quot;,
SUM((CASE WHEN (&quot;Citizen&quot;.&quot;ModalityCount&quot; = 1) THEN &quot;Citizen&quot;.&quot;ModalityCount&quot; ELSE NULL END)) AS &quot;sum:Calc_walk&quot;,
SUM((CASE WHEN (&quot;Citizen&quot;.&quot;ModalityCount&quot; = 3) THEN &quot;Citizen&quot;.&quot;ModalityCount&quot; ELSE NULL END)) AS &quot;sum:Calc_cycle&quot;
FROM &quot;mars&quot;.&quot;Citizen&quot; &quot;Citizen&quot;
GROUP BY 1
</code></pre><p>Using the data that was returned from the database, the following diagram was generated:
<img src="../../../images/docu/walk_cycle_barchart.png" alt="Barchart for walking and cycling">
The chart shows the number of walking and cycling agents per hours for the duration of the 24-hour simulation time.</p>
</li>
</ol>
<hr>
<h2 id="how-to-plot-simulation-output-data-with-tableau">How to plot simulation output data with Tableau</h2>
<p>Tableau can take your simulation&#39;s output data via a csv file or a database connection. Tableau is a useful tool for analyzing and aggregating data as well as creating custom functions to process data as needed.</p>
<ol>
<li><p>Download and install Tableau from <a href="https://www.tableau.com/de-de/products/desktop/download">here</a> </p>
<p>​    <strong>Note:</strong> Students can use this link to obtain the free education version from <a href="https://www.tableau.com/academic/students">here</a>.</p>
</li>
<li><p>Open Tableau and select your data source (csv or database connection).</p>
</li>
<li><p><em>Tableau</em> offers online <a href="https://help.tableau.com/current/pro/desktop/en-us/gettingstarted_overview.htm">Tutorials and Documentation</a>.</p>
</li>
</ol>
<hr>
<h2 id="how-to-create-a-heat-map-of-agents-density-per-tick">How to create a heat map of agents density per tick</h2>
<p>The system offers a Python-based script used to create <em>heat maps</em> of objects per simulation tick. Simulation output data needs to be available in a csv file. Per default, the script is in the directory <code>Analysis</code>.</p>
<ol>
<li><p>In a terminal, navigate to the folder where the script is located. <strong>Note:</strong> Python needs to be installed on your system and added to your system&#39;s path variable to be able to run the script from the terminal. Execute the script by entering the parameters:</p>
<pre><code class="lang-bash">csvtoasc.py &lt;path_to_file_without_file_extension&gt; &lt;grid_cell_size&gt; &lt;column_name_of_longitude&gt; &lt;column_name_of_latitude&gt; 
</code></pre><table>
<thead>
<tr>
<th style="text-align:center">Parameter</th>
<th style="text-align:center">Description</th>
<th style="text-align:center">Example</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">&lt;path_to_file_without_file_extension&gt;</td>
<td style="text-align:center">Absolute or relative path to the file <code>CSV</code>. <strong>Please do not include the file extension.</strong> file</td>
<td style="text-align:center">Citizen (<em>not Citizen.csv</em>)</td>
</tr>
<tr>
<td style="text-align:center">&lt;grid_cell_size&gt;</td>
<td style="text-align:center">Number that specifies the size of a single grid cell (in degrees) of the heat map you wish to generate</td>
<td style="text-align:center"><strong>0.25</strong></td>
</tr>
<tr>
<td style="text-align:center">&lt;column_name_of_longitude&gt;</td>
<td style="text-align:center">Name of the column in the output csv file from which longitude data should be retrieved. <strong>This value depends on your csv file</strong></td>
<td style="text-align:center"><strong>Lon</strong></td>
</tr>
<tr>
<td style="text-align:center">&lt;column_name_of_latitude&gt;</td>
<td style="text-align:center">the name of the column in the output csv file from which latitude data should be retrieved. <strong>This value depends on your csv file</strong></td>
<td style="text-align:center"><strong>Lat</strong></td>
</tr>
</tbody>
</table>
</li>
<li><p>The script generates a folder in the working directory and stores an asc file per tick inside the folder.</p>
</li>
<li><p>You can load the asc files into QGIS (e.g., via drag-and-drop) to visualize them.</p>
</li>
<li><p>OpenStreetMap data (or the layer data from your model) can be layered below the heat maps to show where on the map (and at what time of the simulation) agents were positioned. Below is an example of three heatmaps showing the difference in agent density during three different simulation ticks:</p>
<table>
<thead>
<tr>
<th style="text-align:center"><img src="../../../images/docu/knp_heatmap_morning.png" alt="Morning" style="zoom: 60%;"></th>
<th style="text-align:center"><img src="../../../images/docu/knp_heatmap_noon.png" alt="noon" style="zoom:60%;"></th>
<th style="text-align:center"><img src="../../../images/docu/knp_heatmap_evening.png" alt="evening" style="zoom:60%;"></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">morning</td>
<td style="text-align:center">noon</td>
<td style="text-align:center">evening</td>
</tr>
</tbody>
</table>
</li>
</ol>
</article>
          </div>

          <div class="hidden-sm col-md-2" role="complementary">
            <div class="sideaffix">
              <div class="contribution">
                <ul class="nav">
                  <li>
                    <a href="https://github.com/MARS-Group-HAW/life/blob/main/Documentation/articles/core/40_analysis-and-visualization/visualizing_sim_results.md/#L1" class="contribution-link">Improve this Doc</a>
                  </li>
                </ul>
              </div>
              <nav class="bs-docs-sidebar hidden-print hidden-xs hidden-sm affix" id="affix">
                <h5>In This Article</h5>
                <div></div>
              </nav>
            </div>
          </div>
        </div>
      </div>

      <footer>
        <div class="grad-bottom"></div>
        <div class="footer">
          <div class="container">
            <span class="pull-right">
              <a href="#top">Back to top</a>
            </span>
      <span>Copyright &copy MARS GROUP.<br><strong>HAW Hamburg</strong></span>
      
          </div>
        </div>
      </footer>
    </div>

    <script type="text/javascript" src="../../../styles/docfx.vendor.js"></script>
    <script type="text/javascript" src="../../../styles/docfx.js"></script>
    <script type="text/javascript" src="../../../styles/main.js"></script>
  </body>
</html>
